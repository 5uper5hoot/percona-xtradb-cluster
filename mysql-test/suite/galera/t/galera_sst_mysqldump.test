--source include/big_test.inc
--source include/galera_cluster.inc
--source include/have_innodb.inc

--source suite/galera/include/galera_sst_set_mysqldump.inc

--source suite/galera/include/galera_st_disconnect_slave.inc

# We set the required mysqldump SST options here so that they are used every time the server is restarted during the test
--let $restart_parameters = restart: --wsrep_sst_auth=sst: --wsrep_sst_method=mysqldump --wsrep-sst-receive-address=127.0.0.1:$NODE_MYPORT_2 --skip-grant-tables

--source suite/galera/include/galera_st_shutdown_slave.inc
--source suite/galera/include/galera_st_clean_slave.inc

--source suite/galera/include/galera_st_kill_slave.inc
--source suite/galera/include/galera_st_kill_slave_ddl.inc

--source suite/galera/include/galera_sst_restore.inc

--connection node_2
CALL mtr.add_suppression("Table \`mysql\`\\.\`innodb_table_stats\` not found");
CALL mtr.add_suppression("InnoDB: Fetch of persistent statistics requested for table.*");
CALL mtr.add_suppression("Gtid table is not ready to be used..*");
CALL mtr.add_suppression("Failed to open optimizer cost constant tables");
CALL mtr.add_suppression("InnoDB: Cannot open.*");
