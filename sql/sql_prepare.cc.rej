--- sql/sql_prepare.cc
+++ sql/sql_prepare.cc
@@ -3688,6 +3688,8 @@ reexecute:
   thd->push_reprepare_observer(stmt_reprepare_observer);
 
   error= execute(expanded_query, open_cursor) || thd->is_error();
+
+  thd->pop_reprepare_observer();
 #ifdef WITH_WSREP
   mysql_mutex_lock(&thd->LOCK_wsrep_thd);
   switch (thd->wsrep_conflict_state)
@@ -3705,8 +3707,6 @@ reexecute:
   mysql_mutex_unlock(&thd->LOCK_wsrep_thd);
 #endif /* WITH_WSREP */
 
-  thd->pop_reprepare_observer();
-
   if ((sql_command_flags[lex->sql_command] & CF_REEXECUTION_FRAGILE) &&
       error && !thd->is_fatal_error && !thd->killed &&
       reprepare_observer.is_invalidated() &&
